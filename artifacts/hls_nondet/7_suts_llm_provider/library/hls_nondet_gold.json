{
  "stories": [
    {
      "name": "addNewBook",
      "entities": {
        "active": [
          "Book"
        ],
        "lifecycle": [
          "deleteBook"
        ],
        "passive": [
          "verifyBookExists"
        ]
      },
      "checks": {
        "preconditions": [
          "bookIdExists"
        ],
        "postconditions": [
          "verifyBookExists"
        ],
        "guards": [
          "bookIdNotExists"
        ]
      },
      "steps": [
        "addBook"
      ],
      "notes": [
        "Ensure the book ID is unique before adding."
      ]
    },
    {
      "name": "removeBook",
      "entities": {
        "active": [
          "Book"
        ],
        "lifecycle": [
          "addBook"
        ],
        "passive": [
          "Book"
        ]
      },
      "checks": {
        "preconditions": [
          "verifyBookExists"
        ],
        "postconditions": [
          "verifyBookNotExists"
        ],
        "guards": [
          "validateBookDeletion"
        ]
      },
      "steps": [
        "deleteBook"
      ],
      "notes": [
        "Ensure the book ID is valid before deletion."
      ]
    },
    {
      "name": "addHoldWithVerification",
      "entities": {
        "active": [
          "Hold"
        ],
        "lifecycle": [
          "addHold"
        ],
        "passive": [
          "verifyHoldExists"
        ]
      },
      "checks": {
        "preconditions": [
          "holdIdProvided"
        ],
        "postconditions": [
          "holdAdded"
        ],
        "guards": [
          "deleteHold"
        ]
      },
      "steps": [
        "addHold"
      ],
      "notes": [
        "Ensure holdId is valid before adding."
      ]
    },
    {
      "name": "removeHold",
      "entities": {
        "active": [
          "Hold"
        ],
        "lifecycle": [
          "addHold"
        ],
        "passive": [
          "Book"
        ]
      },
      "checks": {
        "preconditions": [
          "verifyHoldExists"
        ],
        "postconditions": [
          "verifyHoldNotExists"
        ],
        "guards": [
          "checkBookAvailability"
        ]
      },
      "steps": [
        "deleteHold"
      ],
      "notes": [
        "Ensure that the hold is not active before deletion."
      ]
    },
    {
      "name": "addLoanWithDelete",
      "entities": {
        "active": [
          "Loan"
        ],
        "lifecycle": [
          "deleteLoan"
        ],
        "passive": [
          "Loan"
        ]
      },
      "checks": {
        "preconditions": [
          "verifyLoanExists"
        ],
        "postconditions": [
          "verifyLoanExists"
        ],
        "guards": [
          "deleteLoan"
        ]
      },
      "steps": [
        "addLoan"
      ],
      "notes": [
        "Ensure the Loan ID is unique before adding."
      ]
    },
    {
      "name": "deleteLoanById",
      "entities": {
        "active": [
          "Loan"
        ],
        "lifecycle": [
          "addLoan"
        ],
        "passive": [
          "verifyLoanNotExists"
        ]
      },
      "checks": {
        "preconditions": [
          "loanExists"
        ],
        "postconditions": [
          "verifyLoanNotExists"
        ],
        "guards": [
          "loanIdValid"
        ]
      },
      "steps": [
        "deleteLoan"
      ],
      "notes": [
        "Ensure the loan ID is valid before deletion."
      ]
    },
    {
      "name": "addUserWithDelete",
      "entities": {
        "active": [
          "User"
        ],
        "lifecycle": [
          "deleteUser"
        ],
        "passive": [
          "User"
        ]
      },
      "checks": {
        "preconditions": [
          "verifyUserExists"
        ],
        "postconditions": [
          "verifyUserExists"
        ],
        "guards": [
          "deleteUser"
        ]
      },
      "steps": [
        "addUser"
      ],
      "notes": [
        "Ensure the user ID is unique before adding."
      ]
    },
    {
      "name": "deleteUser",
      "entities": {
        "active": [
          "User"
        ],
        "lifecycle": [
          "addUser"
        ],
        "passive": [
          "Book",
          "Loan"
        ]
      },
      "checks": {
        "preconditions": [
          "verifyUserExists"
        ],
        "postconditions": [
          "verifyUserNotExists"
        ],
        "guards": [
          "verifyLoanNotExists"
        ]
      },
      "steps": [
        "deleteUser"
      ],
      "notes": [
        "Ensure that the user has no active loans before deletion."
      ]
    }
  ]
}